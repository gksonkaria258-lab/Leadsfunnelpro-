<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lead CRM Login</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
font-family:system-ui;
background:linear-gradient(135deg,#2563eb,#0f172a);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}

.card{
background:white;
padding:25px;
border-radius:15px;
width:320px;
box-shadow:0 10px 30px rgba(0,0,0,0.3);
text-align:center;
}

.logo{
font-size:40px;
font-weight:bold;
color:#2563eb;
margin-bottom:5px;
}

.subtitle{
color:gray;
margin-bottom:15px;
}

.tabs{
display:flex;
background:#f1f5f9;
border-radius:10px;
margin-bottom:15px;
}

.tabs button{
flex:1;
padding:10px;
border:none;
background:none;
cursor:pointer;
border-radius:10px;
font-weight:bold;
}

.active{
background:#2563eb;
color:white;
}

input{
width:100%;
padding:12px;
margin:8px 0;
border:1px solid #ddd;
border-radius:8px;
}

.btn{
width:100%;
padding:12px;
background:#0f172a;
color:white;
border:none;
border-radius:8px;
margin-top:10px;
font-weight:bold;
cursor:pointer;
}

.btn:hover{
background:#1e293b;
}
</style>

</head>
<body>

<div class="card">

<div class="logo">CRM</div>
<div class="subtitle">Never miss a follow-up again</div>

<div class="tabs">
<button id="loginTab" class="active" onclick="showLogin()">Login</button>
<button id="signupTab" onclick="showSignup()">Create account</button>
</div>

<!-- LOGIN -->
<div id="loginBox">

<input id="loginEmail" type="email" placeholder="Email">
<input id="loginPassword" type="password" placeholder="Password">

<button class="btn" onclick="login()">Sign In</button>

</div>

<!-- SIGNUP -->
<div id="signupBox" style="display:none;">

<input id="signupEmail" type="email" placeholder="Email">
<input id="signupPassword" type="password" placeholder="Password">

<button class="btn" onclick="signup()">Create Account</button>

</div>

</div>

<script>

const supabaseClient = supabase.createClient(
"https://yqvnpuzketsjfbjqfnfb.supabase.co",
"sb_publishable_tK8B2cY6JN-uiHxWM87Tmw_B8XQJlAs"
);

function showSignup(){
signupBox.style.display="block";
loginBox.style.display="none";
signupTab.classList.add("active");
loginTab.classList.remove("active");
}

function showLogin(){
signupBox.style.display="none";
loginBox.style.display="block";
loginTab.classList.add("active");
signupTab.classList.remove("active");
}


// SIGNUP
async function signup(){

const email=document.getElementById("signupEmail").value;
const password=document.getElementById("signupPassword").value;

const {error}=await supabaseClient.auth.signUp({
email:email,
password:password
});

if(error){
alert(error.message);
}else{

// auto login
await supabaseClient.auth.signInWithPassword({
email:email,
password:password
});

window.location.href="dashboard.html";
}

}


// LOGIN
async function login(){

const email=document.getElementById("loginEmail").value;
const password=document.getElementById("loginPassword").value;

const {error}=await supabaseClient.auth.signInWithPassword({
email:email,
password:password
});

if(error){
alert(error.message);
}else{

window.location.href="dashboard.html";

}

}


// auto redirect if already logged in
supabaseClient.auth.getSession().then(({data})=>{
if(data.session){
window.location.href="dashboard.html";
}
});

</script>

</body>
</html>


